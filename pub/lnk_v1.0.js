Modules["LNK_v1.0"]=function(t){function i(t){1<t.page&&t.items.length<1&&(t.page=1)}function a(n){return function(t,e){t&&console.warn(t),Popup(e||"Tinklo klaida.").Show(),n(!1)}}function m(t,e,n,i,o){var r=a(e);XHR(t,function(t){try{n(t)}catch(t){r(t,o)}},i,r)}function e(n,t){m(y.vid+"/"+t.urlSegment+"/"+t.id+"/true",n,function(t){var e=t.videoConfig.videoInfo;AV.Open((e[I.m3u8]?y.smil:y.mp4)+e.videoUrl+"/"+I.pls+e[I.tkn],e.title,n)},0,"Programa nerasta.")}function n(e,n){1<n.page&&n.items.length<1&&(n.page=1),m(y.eps+"/"+n.id+"/1/"+n.page+"/",e,function(t){V(e,n,t)})}function o(e,n){m(y.srch+"/"+encodeURIComponent(n.query)+"/"+n.page+"/",e,function(t){V(e,n,t.components[0].component)})}function r(n,t){var i=a(n);Input.Show("Programos ID: ",function(t){var e=parseInt(t);e?m(y.prg+"/"+e,n,function(t){t.program&&t.program.id===e?n(P({id:e,posterImage:t.program.coverImage,title:t.program.title})):i("","Programa nerasta.")},0,"Neteisingas programos ID."):t?i("","Neteisingas programos ID."):n(!1)})}function c(c,s){var u=s.pages.shift();function g(t){t=function(t,n){return t.sort(function(t,e){return t[n]>e[n]?1:e[n]>t[n]?-1:0})}(t,"title"),s.items=s.items.concat(t),c(t)}s.pages.length||(s.more=!1),m(y.list+"?letter="+encodeURIComponent(u),c,function(t){var e,i=[];if(12<=t.programList.length){function n(t){for(var e in t.programList){var n=P(t.programList[e]);i.push(n)}o<=++r&&g(i)}var o=s.cnl.length,r=0;for(e in s.cnl)m(y.list+"?channelId="+s.cnl[e]+"&letter="+u,c,n)}else{for(e in t.programList){var a=P(t.programList[e]);i.push(a)}g(i)}})}function s(n,i){i.more?i.pages.length?c(n,i):m(y.home,n,function(t){for(var e in t.channels)i.cnl.push(t.channels[e].id);m(y.list,n,function(t){i.pages=t.letters,c(n,i)})}):setTimeout(function(){n()},1e3)}function u(t,e,n){m(y.feed,t,function(t){n(t)},{tagId:e.id,pageIndex:e.page})}function g(e,n){i(n),u(e,n,function(t){V(e,n,t.components[0].component)})}function d(i,o){u(i,o,function(t){var e=t.tagFilter;for(var n in e)o.items.push(w(e[n].tag));i(o.items)})}function p(i){m(y.home,i,function(t){var e=[T({id:0,title:"Visi Kanalai"})];for(var n in t.channels)e.push(T(t.channels[n]));i(e)})}function l(i,o){m(y.list+"?pageIndex=1"+(o.id?"&channelId="+o.id:""),i,function(t){var e=[k({id:0,title:"Visi įrašai",chn:o.id})];for(var n in t.letters)e.push(k({id:encodeURIComponent(t.letters[n]),title:t.letters[n],chn:o.id}));i(e)})}function f(e,n){i(n),m(y.list+"?pageIndex="+n.page+(n.chn?"&channelId="+n.chn:"")+(n.id?"&letter="+n.id:""),e,function(t){V(e,n,t.videoGrid)})}var h=t.Web,v="https://"+t.Url+h.Root,I=t.Vars,y={host:"https://"+t.Url,pub:v,vid:v+h.Video,eps:v+h.Episodes,srch:v+h.Search,prg:v+h.Program,list:v+h.List,home:v+h.Home,feed:v+h.Feed},V=function(t,e,n){var i=[];for(var o in n.videos)i.push(L(n.videos[o]));n.pageLimit>n.videos.length&&(e.more=!1),e.items=e.items.concat(i),t(i),e.page++},L=function(t){return{id:t.id,title:t.title,url:t.urlSegment,image:y.img+t.posterImage,duration:Hms(t.duration,1),date:t.airDateText,type:"grid",action:e}},P=function(t){return{id:t.id,page:1,image:y.img+t.posterImage,title:t.title,imgClass:null,type:"grid",items:[],more:!0,action:n}},C=function(){return{id:1,title:"Atidaryti programą",type:"grid",items:[],action:r}},F=function(){return{id:0,title:"Visos Laidos",type:"grid min",items:[],more:!0,pages:[],cnl:[],action:s}},U=function(){return{id:h.FeedTag,title:"Naujausi Video",page:1,type:"menu center",items:[],action:d}},w=function(t){return{id:t.id||h.FeedTag,title:t.title,page:1,items:[],type:"grid",action:g,more:!0}},S=function(){return{id:h.FeedTag,title:"Mediateka",page:1,type:"menu center",items:[],action:p}},T=function(t){return{id:t.id,title:t.title,page:1,type:"grid min center",items:[],action:l}},k=function(t){return{id:t.id,title:t.title,page:1,chn:t.chn,more:!0,type:"grid",items:[],action:f}};return{items:[],more:!1,title:t.Name,type:"menu center",image:y.host+t.Icon,selectFirst:!0,moreHeight:t.moreHeight||1200,search:function(t,e){e(function(t){return{id:2,title:'Paieška: "'+t+'"',query:t,page:1,type:"grid",more:!0,action:o}}(t))},action:function(e){m(y.pub+"/settings",e,function(t){y.img=y.host+t.Portal_ImageFolder,y.vod=t.WowzaVodUrl,y.mp4=y.vod+t.WowzaVodContentPath,y.smil=y.vod+t.WowzaVodContentPathSmil,e([F(),U(),S(),C()])})}}};