Modules.Include("TVPlay_v1.0",function(e){function m(e){Popup("Error",e,null,{Type:"Error"})}function g(e,t,i,r){AV.Open(e,t+(i&&i!==t?" - "+i:""),r)}var t="https://"+e.Url+e.Icon,c={img:"https://"+(e.UrlImage||e.Url)+"/thumbnails/320x180",host:"https://"+e.Url,pub:"https://"+e.Url+e.UrlRoot,title:e.Name,pageLG:30,pageSM:50,imageError:e.IconItemSVG?"":t,imgClass:e.IconItemSVG?"img-svg img-svg-"+e.Name+"-item":"",uVer1:e.Version,uVer2:e.UrlRoot+"/videoContent/search?"+(e.Version2||e.Version),uBase:function(){return c.pub+"/dashboard/type/WEB?"+c.uVer1},uEl1:function(e){return c.pub+"/dashboard/elements/"+e+"?"+c.uVer1},uEl2:function(e,t,i){return c.pub+"/dashboard/carousel/elements/"+e+"?"+c.uVer1+"&detailed=true&size="+t+"&page="+i},uTv:function(e,t){return c.host+c.uVer2+"sort=relevance&sort=title.title&size="+e+"&page="+t},uTvq:function(e,t,i){return c.host+c.uVer2+"sort=relevance&f_title.titleORtitle.titleBriefORtitle.summaryShortORtitle.summaryLong="+encodeURIComponent(e)+"&size="+t+"&page="+i}},d=function(l){var a=0,u={id:l.id,image:l.noImage?null:l.imageUrl?c.img+l.imageUrl+".jpg":c.imageError,title:l.title.title||l.title,descr:l.title.titleBrief,parent:l.parent,date:(l.metadata||"").airDate||l.createdDate,query:l.query,season:l.seasonNumber||(l.metadata||"").seasonNumber,imgClass:l.noImage?null:c.imgClass,duration:l.title.runTime,summary:l.title.summaryLong,type:l.seasonNumber||!l.title.runTime&&!l.tvSeasonUrls?l.seasonNumber?"grid":"grid min":"list max",items:[],more:!l.title.runTime&&!l.tvSeasonUrls&&!l.seasonNumber,action:function(n){if(l.title.runTime)XHR(c.host+l.detailsUrl,function(e){u.type="grid",g(e.movie.contentUrl,u.title,u.descr,n)},null,m);else if(l.seasonNumber)XHR(c.host+l.episodeVodAssetsUrl+"&size=2000",function(e){for(var t in e.content){var i=e.content[t];i.title.title===u.parent&&(i.title.title=i.title.titleBrief);var r=new d(i);u.items.push(r)}n&&n(u.items)},null,m);else if(l.tvSeasonUrls){function e(e){i--,e.title.titleBrief="",e.parent=u.title.substr(0,u.title.indexOf(" [")),r.push(new d(e)),i||(r&&r.sort&&r.sort(function(e,t){return e.season<t.season?1:t.season<e.season?-1:0}),u.items=r,n&&n(r))}var t=l.tvSeasonUrls,i=t.length,r=[];for(var s in t)XHR(c.host+t[s],e,null,m)}else if(u.more){var o=c.pageSM;u.more&&a*o!==u.items.length&&(a=0,u.items=[]),XHR(u.query?c.uTvq(u.query,o,a):c.uTv(o,a),function(e){a++;var t=[];for(var i in e.length<o&&(u.more=!1),e){var r=new d(e[i]);u.items.push(r),t.push(r)}n&&n(t)},null,m)}else{if(u.items.length<1&&0<a)return u.more=!0,a=0,u.action(n);n&&n()}},error:m};return u},a=function(e,t){var o=0,l={id:e.targetId||e.id,image:e.contentUrl||e.imageUrl?e.imageUrl?c.img+e.imageUrl+".jpg":c.imageError:null,title:e.title,descr:e.subTitle,date:e.eventStartTime,duration:Hms(e.runTimeInSeconds,1),type:1===t?"grid":"menu center",items:[],more:1===t,action:function(n){if(e.contentUrl)g(e.contentUrl,l.title,l.descr,n),l.type="grid";else if(1===t){var s=c.pageLG;o*s!==l.items.length&&(o=0,l.items=[]),XHR(c.uEl2(e.id,s,o),function(e){o++;var t=[];for(var i in e.content.length<s&&(l.more=!1),e.content){var r=new a(e.content[i]);l.items.push(r),t.push(r)}n&&n(t)},null,m)}else e.id?XHR(c.uEl1(e.id),function(e){for(var t in e&&e.sort&&e.sort(function(e,t){return e.position>t.position?1:t.position>e.position?-1:0}),e)l.items.push(new a(e[t].carousel,1));n&&n(l.items)},null,m):n&&(l.type="grid",n(),console.log("other"))},error:m};return l},r={items:[],more:!1,title:c.title,type:"menu center",selectFirst:!0,moreHeight:e.moreHeight||1200,imgClass:e.IconItemSVG?" img-svg img-svg-"+e.Name+"-item":"",search:function(e,t){t(d({id:0,title:e?'Laidos: "'+e+'"':"Visos Laidos",query:e,type:"grid",noImage:"none"}))},action:function(i){XHR(c.uBase(),function(e){for(var t in r.items=[new d({id:0,title:"Visos Laidos",type:"grid",noImage:"none"})],e)r.items.push(a(e[t]));i&&i(r.items)},null,m)},error:m};return r});